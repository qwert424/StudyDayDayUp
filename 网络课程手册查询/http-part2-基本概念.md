## 响应的消息格式

服务器（通常由后端开发）收到请求的消息后，会运行后端代码对请求进行处理，处理完成后，会给予响应。

服务器的响应格式包含三个部分

![image-20220415182351508](http://mdrs.yuanjin.tech/img/20220415182351.png)

#### 响应行

响应行是整个响应字符串的第一行。

响应行包含两个部分：

- 协议版本：表示服务器打算和客户端用什么协议通信
- **状态码、状态消息**：表示服务器对当前请求的表态

**通常**，状态码和状态消息是一一对应的，比如状态码200的消息就是OK

不同的请求可能会得到不同的状态码，至于到底会得到哪个状态码，由后端程序决定。

状态码分为五类：

| 分类 | 分类描述                                       |
| :--- | :--------------------------------------------- |
| 1**  | 信息，服务器收到请求，需要请求者继续执行操作   |
| 2**  | 成功，操作被成功接收并处理                     |
| 3**  | 重定向，需要进一步的操作以完成请求             |
| 4**  | 客户端错误，请求包含语法错误或无法完成请求     |
| 5**  | 服务器错误，服务器在处理请求的过程中发生了错误 |

通常认为，0~399之间的状态码都是正常的，其他是不正常的

常见的状态码有：

1. 200 OK：一切正常。

2. 301 Moved Permanently：资源已被永久重定向。

   ```你的请求我收到了，但是呢，你要的东西不在这个地址了，我已经永远的把它移动到了一个新的地址，麻烦你取请求新的地址，地址我放到了响应头的Location中了```

3. 302 Found：资源已被临时重定向。

   ```你的请求我收到了，但是呢，你要的东西不在这个地址了，我临时的把它移动到了一个新的地址，麻烦你取请求新的地址，地址我放到了请求头的Location中了```

4. 304 Not Modified：文档内容未被修改。

   ```你的请求我收到了，你要的东西跟之前是一样的，没有任何的变化，所以我就不给你结果了，你自己就用以前的吧。啥？你没有缓存以前的内容，关我啥事```

5. 400 Bad Request：语义有误，当前请求无法被服务器理解。

   ```你给我发的是个啥啊，我听都听不懂```

6. 403 Forbidden：服务器拒绝执行。

   ```你的请求我已收到，但是我就是不给你东西```

7. 404 Not Found：资源不存在。

   ```你的请求我收到了，但我没有你要的东西```

8. 500 Internal Server Error：服务器内部错误。

   ```你的请求我已收到，但这道题我不会，解不出来，先睡了```

#### 响应头 header

和请求头一样，响应头也是由很多个键值对组成的，具体有哪些键值对，完全取决于服务器程序

目前，对我们最重要的键值对是`Content-Type`，它有多种取值，表示响应体的数据类型。

在B/S模式中，浏览器会自动根据响应头中`Content-Type`的取值，决定如何处理响应体。

1. `text/plain`: 普通的纯文本，浏览器通常会将响应体原封不动的显示到页面上
2. `text/html`：html文档，浏览器通常会将响应体作为页面进行渲染
3. `text/javascript` 或 `application/javascript`：js代码，浏览器通常会使用JS执行引擎将它解析执行
4. `text/css`：css代码，浏览器会将它视为样式
5. `image/jpeg`：浏览器会将它视为jpg图片
6. `attachment`：附件，浏览器看到这个类型，通常会触发下载功能
7. 其他`MIME`类型

#### 响应体 body

响应的主体内容

### 作业

1. 使用postman向`http://www.douyutv.com`发送GET请求，回答下面的问题：
   - 状态码是什么？表达了什么含义？
   - 响应头中的Location的值是什么？表达了什么含义？
2. 使用postman向`https://www.taobao.com`发送GET请求，回答下面的问题：
   - 响应头中的`Content-Type`的值是什么？表达了什么含义？
3. 阅读[注册接口文档](https://mock.duyiedu.com/project/72/interface/api/108)，使用postman完成下面的作业：
   - 随意使用错误的消息内容请求注册接口，观察请求头中的Content-Type、请求体、响应的状态码、响应体、响应头中的Content-Type
   - 使用正确的消息内容请求注册接口，观察请求头中的Content-Type、请求体、响应的状态码、响应体、响应头中的Content-Type